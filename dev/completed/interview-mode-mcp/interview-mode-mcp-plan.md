# Interview Mode MCP - Plan

## 목표
Claude Code에서 인터뷰 모드에 진입,
Claude가 대화형으로 질문을 이어가며 방향을 잡아주는 MCP 서버.
**사용할수록 진화하는 인터뷰 시스템.**

## 설계 원칙
- MCP = 상태 추적 + 체크포인트 관리 (Supabase 연동)
- Claude = 인터뷰어 (질문/판단 자율, 적극 제안)
- 프롬프트 = Claude 행동 규칙 + 문서 연동 지시
- 문서 조작 = Claude Code 네이티브 도구 (Read/Edit) — MCP로 로컬 파일 전송 금지
- 프라이버시 = 메타데이터만 외부 전송, 개인 내용은 로컬만

## 핵심 고도화 방향 (인터뷰 결과)

### 1. 살아있는 체크리스트
- `start_interview`: 카테고리별 체크포인트를 Supabase에서 로드
- `record`: Q&A 기록 + Claude가 `covered_checkpoints`로 매칭 보고
- `get_context`: 기존 기록 + 미탐색 체크포인트 함께 반환
- `end_interview`: 메타데이터(카테고리, 체크포인트, 패턴) Supabase 업로드

### 2. Supabase 3 레이어 데이터
| 레이어 | 내용 | 목적 |
|--------|------|------|
| 인터뷰 패턴 | 카테고리별 질문 경로 | 효과적인 질문 순서 학습 |
| 체크포인트 사전 | 카테고리별 물어볼 항목 | 새 인터뷰에서 누락 방지 |
| 질문 품질 스코어 | 결정 도달률 | 좋은 질문 우선 추천 |

### 3. 프롬프트 고도화
- 인터뷰어가 옵션 나열이 아닌 **의견과 근거를 가지고 적극 제안**
- 인터뷰 시작 시 관련 로컬 문서 존재 여부 확인 → 읽고 맥락 활용
- 인터뷰 종료 시 로컬 문서 업데이트 제안

### 4. 역할 분리
| 역할 | 담당 |
|------|------|
| 체크포인트/메타데이터 | MCP 서버 (Supabase) |
| 행동 규칙 (질문 전략, 문서 제안) | 프롬프트 |
| 파일 읽기/수정 | Claude Code (Read/Edit) |

## 실행 로드맵

### Phase 1: 초기 구현 (완료)
MCP 서버 기본 구현 + 빌드 + 테스트

### Phase 2: 테스트 & 검증 (완료)
실제 인터뷰 세션 E2E 테스트 → 고도화 방향 도출

### Phase 3: 체크포인트 시스템 (다음)
- Supabase 테이블 설계 + 연동
- `record`에 `covered_checkpoints` 파라미터 추가
- `get_context`에 미탐색 체크포인트 반환 추가
- `end_interview`에서 Supabase 업로드

### Phase 4: 프롬프트 고도화
- 적극 제안형 인터뷰어 프롬프트
- 문서 연동 지시 (시작 시 읽기, 종료 시 수정 제안)
- 체크포인트 활용 지시 (미탐색 항목 기반 질문)

### Phase 5: 진화 시스템
- 인터뷰 패턴 수집 + 분석
- 질문 품질 스코어링
- 카테고리별 최적 인터뷰 경로 자동 형성

## 배포 전략
- npm 패키지로 배포 (`npx claude-interview-mode`)
- 사용자는 `.mcp.json`에 한 줄 추가로 설치
- Supabase 연동은 환경변수로 옵션 처리 (없으면 로컬 전용 모드)
